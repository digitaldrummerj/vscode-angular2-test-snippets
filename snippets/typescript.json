// Version 0.1.0 - 2016-09-20
{
    "Class unit test without TestBed": {
        "prefix": "ng2-test-without-testbed",
        "description": "Recipe for an isolated unit test (i.e. class, function) without TestBed",
        "body": [
            "/*",
            " * Testing a TypeScript class",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#testing-without-atp",
            " */",
            "",
            "import { ${EnterAClassName} } from './${filename:enter-a-file-name}';",
            "",
            "describe('${EnterAClassName}', () => {",
            "    beforeEach(() => {",
            "        // write your set up here",
            "    });",
            "",
            "    it('${assertion:should enter the assertion}', () => {",
            "        expect(${value:enterAValue}).toBe(${result:enterTheExpectedResult});",
            "        // expect('1').toEqual(1);",
            "    });",
            "});"
        ]
    },

    "Directive Test Recipe": {
        "prefix": "ng2-test-directive",
        "description": "Recipe for testing a Directive in Angular 2",
        "body": [
            "/*",
            " * Testing an Angular directive",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#pipes",
            " */",
            "",
            "import { Component } from '@angular/core';",
            "import { TestBed, async } from '@angular/core/testing';",
            "import { By } from '@angular/platform-browser';",
            "",
            "import { ${EnterTheDirectiveName} } from './${filename:enter-the-file-name}.directive';",
            "",
            "@Component({",
            "    selector: 'container',",
            "    template: `<div ${selector:Enter the directive selector} class=\"inside\">Container content</div>`",
            "})",
            "export class Container { }",
            "",
            "describe('${EnterTheDirectiveName}', () => {",
            "    beforeEach(() => {",
            "        TestBed.configureTestingModule({",
            "            declarations: [",
            "                ${EnterTheDirectiveName},",
            "                Container",
            "            ],",
            "        });",
            "    });",
            "",
            "    it('${assertion:should enter the assertion}', async(() => {",
            "        TestBed.compileComponents().then(() => {",
            "            let fixture  = TestBed.createComponent(Container);",
            "            fixture.detectChanges();",
            "            let compiled = fixture.debugElement.nativeElement;",
            "",
            "             // you may also try By.all or By.directive(directive)",
            "            // let el = fixture.debugElement.query(By.css('.inside'));",
            "",
            "             // expect(el.nativeElement.textContent).toContain('some text in here');",
            "            expect(${value:enterAValue}).toBe('${result:enterTheExpectedResult}');",
            "",
            "             // more matches here: https://goo.gl/hDEt05",
            "        });",
            "    }));",
            "});"
        ]
    },

    "Pipe Test Recipe": {
        "prefix": "ng2-test-pipe",
        "description": "Recipe for testing a Pipe in Angular 2",
        "body": [
            "/*",
            " * Testing an Angular 2 pipe",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#pipes",
            " */",
            "",
            "import { ${EnterThePipeName} } from './${filename:enter-the-file-name}.pipe';",
            "",
            "describe('${EnterThePipeName}', () => {",
            "    var pipe;",
            "",
            "    beforeEach(() => {",
            "        pipe = new ${EnterThePipeName}();",
            "    });",
            "",
            "    it('${assertion:should enter the assertion}', () => {",
            "        expect(pipe.transform(${value:enterAValue})).toBe('${result:enterTheExpectedResult}');",
            "    });",
            "});"
        ]
    },

    "Component Test Recipe": {
        "prefix": "ng2-test-component",
        "description": "Recipe for testing a simple Component in Angular 2",
        "body": [
            "/*",
            " * Testing a simple Angular 2 component",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#simple-component-test",
            " */",
            "",
            "import { TestBed } from '@angular/core/testing';",
            "import { By } from '@angular/platform-browser';",
            "import { DebugElement } from '@angular/core';",
            "",
            "import { ${EnterTheComponentName} } from './${filename:enter-the-file-name}.component';",
            "",
            "describe('${EnterTheComponentName}', () => {",
            "    let fixture, comp, el;",
            "",
            "    beforeEach(() => {",
            "        TestBed.configureTestingModule({",
            "            declarations: [${EnterTheComponentName}],",
            "             providers: []",
            "        });",
            "",
            "        fixture = TestBed.createComponent(${EnterTheComponentName});",
            "        comp = fixture.componentInstance;",
            "",
            "        // el = fixture.debugElement.query(By.css('h1'));",
            "    });",
            "",
            "    it('${assertion:should enter the assertion}', () => {",
            "        fixture.detectChanges();",
            "        // expect(el.nativeElement.textContent).toContain('Test Title');",
            "        // expect((fixture.debugElement.classes as any).className).toBe(true);",
            "        expect(${value:enterAValue}).toBe(${result:enterTheExpectedResult});",
            "    });",
            "});"
        ]
    },

    "Component with Route and Spy Test Recipe": {
        "prefix": "ng2-test-component-routed",
        "description": "Recipe for testing a Component with asynchronous Service dependency in Angular 2",
        "body": [
            "/*",
            " * Testing a Component with Router and Spy",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#routed-component-w-param",
            " */",
            "import { TestBed, async, inject } from '@angular/core/testing';",
            "import { Router } from '@angular/router';",
            "import { ChangeDetectorRef } from '@angular/core';",
            "",
            "import { ${EnterTheComponentName} } from './${filename:enter-the-file-name}.component';",
            "",
            "describe('${EnterTheComponentName}', () => {",
            "    class RouterStub {",
            "        navigate(path: Array<any>) { }",
            "    }",
            "",
            "    let fakeChangeDetectorRef = {",
            "        markForCheck: () => { }",
            "    };",
            "",
            "    let fixture, comp;",
            "",
            "    beforeEach(async(() => {",
            "        TestBed.configureTestingModule({",
            "            declarations: [",
            "                ${EnterTheComponentName}",
            "            ],",
            "            providers: [",
            "                { provide: Router, useClass: RouterStub },",
            "                { provide: ChangeDetectorRef, useValue: fakeChangeDetectorRef },",
            "                ${EnterTheComponentName}",
            "            ]",
            "        })",
            "        .compileComponents()",
            "        .then(() => {",
            "            fixture = TestBed.createComponent(${EnterTheComponentName});",
            "            comp = fixture.componentInstance;",
            "            fixture.detectChanges();",
            "        });",
            "    }));",
            "",
            "    it('${assertion:should enter the assertion}', inject([Router], (router: Router) => {",
            "        const spy = spyOn(router, 'navigate');",
            "",
            "        comp.${enterAMethodToCall}(${methodArguments});",
            "",
            "        expect(spy.calls.mostRecent().args[0]).toEqual([ '/' ]);",
            "        // expect(spy.calls.mostRecent().args[1].queryParams.paramName).toEqual('value');",
            "    }));",
            "});",
        ]
    },

    "Observable Test Recipe": {
        "prefix": "ng2-test-observable",
        "description": "Recipe for testing an Observable in Angular 2",
        "body": [
            "/*",
            " * Testing an Observable",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#observable-tests",
            " */",
            "describe('${testDescription:Enter a description}', () => {",
            "    let obs$;",
            "",
            "    beforeEach(() => {",
            "        // example below emits 2 values from an array",
            "        obs$ = Observable.from([",
            "            {id: 10, name: 'Galo'},",
            "            {id: 20, name: 'Blue Team'}",
            "        ]);",
            "    });",
            "",
            "    it('${assertion1:should enter an assertion on the observable}', () => {",
            "        expect(obs$ instanceof Observable).toBe(true);",
            "    });",
            "",
            "    it('${assertion1:should enter an assertion on the subscription}', done => {",
            "        var steps = [];",
            "         // example below receives values twice",
            "        obs$.subscribe(value => {",
            "            steps.push(value);",
            "",
            "            if (steps.length === 2) {",
            "                done();",
            "            }",
            "        });",
            "    });",
            "});"
        ]
    },

    "Redux State Test Recipe": {
        "prefix": "ng2-test-redux",
        "description": "Recipe for testing Redux pattern in Angular 2",
        "body": [
            "/*",
            " * Testing a Redux action based on ng2-redux",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#inject",
            " *       and: https://github.com/angular-redux/ng2-redux/",
            " */",
            "import { TestBed, async, inject } from '@angular/core/testing';",
            "import { NgRedux } from 'ng2-redux';",
            "",
            "import { AppState } from '../store';",
            "import { rootReducer } from '../reducers';",
            "import { ${EnterTheActionsClass} } from '../actions/${filename:enter-the-file-name}.actions';",
            "",
            "describe('${EnterTheActionsClass}', () => {",
            "    let reduxFactory = () => {",
            "        let ngRedux = new NgRedux<AppState>();",
            "        ngRedux.configureStore(rootReducer, undefined);",
            "        return ngRedux;",
            "    };",
            "",
            "    beforeEach(async(() => {",
            "        TestBed.configureTestingModule({",
            "            providers: [",
            "                { provide: NgRedux, useFactory: reduxFactory},",
            "                ${EnterTheActionsClass}",
            "            ]",
            "        });",
            "    }));",
            "",
            "    it('should update queryParams', inject(",
            "        [NgRedux, ${EnterTheActionsClass}],",
            "        (ngRedux: NgRedux<AppState>, ${actionsObj:enterTheActionsObject}: ${EnterTheActionsClass}) => {",
            "            ${actionsObj}.${actionMethod:enterTheActionMethod}(${args:enterArguments});",
            "",
            "            ngRedux.select([ '${statePath:enterThePath}' ])",
            "                .subscribe(value => {",
            "                    expect(value).toEqual(${result:enterTheExpectedResult});",
            "                });",
            "        }));",
            "});"
        ]
    },

    "Component with Services Test Recipe": {
        "prefix": "ng2-test-component-service",
        "description": "Recipe for testing a Routed Component in Angular 2",
        "body": [
            "/*",
            " * Testing a Component with async services",
            " * More info: https://angular.io/docs/ts/latest/guide/testing.html#!#component-with-async-service",
            " */",
            "import { TestBed, async, inject, takeAsync, tick } from '@angular/core/testing';",
            "import { ChangeDetectorRef } from '@angular/core';",
            "import { Pipe, PipeTransform } from '@angular/core';",
            "",
            "import { ${EnterApiServiceName} } from '${api-module}';",
            "import { ${EnterTheComponentName} } from './${filename:enter-the-file-name}.component';",
            "",
            "@Pipe({ name: 'translate' })",
            "export class FakeTranslatePipe implements PipeTransform {",
            "    transform(value: any, decimalPlaces: number): any {",
            "        return value;",
            "    }",
            "}",
            "",
            "describe('${EnterTheComponentName}', () => {",
            "    let fake${EnterApiServiceName} = {",
            "        operationAsExample: (args) => {",
            "            return Observable.of({",
            "                // Example of JSON returned by API operation",
            "            });",
            "        }",
            "    };",
            "",
            "    let fakeChangeDetectorRef = {",
            "        markForCheck: () => { }",
            "    };",
            "",
            "    let fixture, comp;",
            "",
            "    beforeEach(async(() => {",
            "        TestBed.configureTestingModule({",
            "            declarations: [",
            "                ${EnterTheComponentName},",
            "                FakeTranslatePipe",
            "            ],",
            "            providers: [",
            "                { provide: ChangeDetectorRef, useValue: fakeChangeDetectorRef },",
            "                { provide: ${EnterApiServiceName}, useValue: fake${EnterApiServiceName} },",
            "                ${EnterTheComponentName}",
            "            ]",
            "        })",
            "        .compileComponents()",
            "        .then(() => {",
            "            fixture = TestBed.createComponent(${EnterTheComponentName});",
            "            comp = fixture.componentInstance;",
            "            fixture.detectChanges();",
            "        });",
            "    }));",
            "",
            "    it('${assertion:should enter the assertion}', inject([${EnterApiServiceName}], (service: ${EnterApiServiceName}) => {",
            "        comp.${enterAMethodToCall}(${methodArguments});",
            "",
            "        // service.operationAsExample(args);",
            "        expect(${value:enterAValue}).toBe(${result:enterTheExpectedResult});",
            "    }));",
            "",
            "    it('${assertion2:should enter the assertion with fake async}', fakeAsync(() => {",
            "        fixture.detectChanges(); // trigger data binding",
            "        tick();                  // wait for async getQuote",
            "        fixture.detectChanges(); // update view with quote",
            "        expect(${value2:enterAValue}).toBe(${result2:enterTheExpectedResult});",
            "    }));",
            "});",
        ]
    },

    "Component with Inputs and Output Test Recipe": {
        "prefix": "ng2-test-component-properties",
        "description": "EMPTY - Recipe for testing an EventEmitter in Angular 2",
        "body": [
            "// TODO"
        ]
    },

    "Form Test Recipe": {
        "prefix": "ng2-test-form",
        "description": "EMPTY - Recipe for testing Forms in Angular 2",
        "body": [
            "// TODO"
        ]
    },

    "Guard Test Recipe": {
        "prefix": "ng2-test-guard",
        "description": "EMPTY - Recipe for testing route Guards in Angular 2",
        "body": [
            "// TODO"
        ]
    },

    "Mockbackend Test Recipe": {
        "prefix": "ng2-test-mockbackend",
        "description": "EMPTY - Recipe for testing Http service with MockBackend in Angular 2",
        "body": [
            "// TODO"
        ]
    },

    "Routes Test Recipe": {
        "prefix": "ng2-test-routes",
        "description": "EMPTY - Recipe for testing Routes in Angular 2",
        "body": [
            "// TODO"
        ]
    },

    "Service Test Recipe": {
        "prefix": "ng2-test-service",
        "description": "EMPTY - Recipe for testing a Service in Angular 2",
        "body": [
            "// TODO"
        ]
    }
}